<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>é›†çµå¸ä»¤å¡”</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
  font-family:sans-serif;
  background:#111;
  color:#fff;
  text-align:center;
}
.tab button{
  padding:10px;
  margin:3px;
  font-size:14px;
  border:none;
  border-radius:6px;
}
.active{background:#0af;color:#fff;}
.section{display:none;margin-top:15px;}
.timer{font-size:48px;margin:10px;}
.result{white-space:pre-line;color:#7CFC00;margin-top:10px;}
input,button,select{
  padding:8px;
  margin:4px;
  font-size:16px;
}
</style>
</head>
<body>

<h1>ğŸ›° é›†çµå¸ä»¤å¡”</h1>

<h3>å‚åŠ è€…ã¨ç§»å‹•æ™‚é–“ï¼ˆç§’ï¼‰</h3>
<input id="name" placeholder="åå‰">
<input id="time" type="number" placeholder="ç§’">
<button onclick="add()">è¿½åŠ </button>
<p id="members"></p>

<div class="tab">
<button onclick="showTab('up')" class="active">ğŸŸ¥ ã‚«ã‚¦ãƒ³ãƒˆã‚¢ãƒƒãƒ—</button>
<button onclick="showTab('down')">ğŸŸ¦ ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³</button>
<button onclick="showTab('utc')">ğŸŒ UTCå‡ºç™ºè¨ˆç®—</button>
</div>

<div id="up" class="section" style="display:block;">
<h2>ã‚«ã‚¦ãƒ³ãƒˆã‚¢ãƒƒãƒ—ï¼ˆé ï¼‰</h2>
<button onclick="calcUp()">è¨ˆç®—</button>
<div class="timer" id="upTimer">-</div>
<button onclick="startUp()">é–‹å§‹</button>
<button onclick="stopAll()">åœæ­¢</button>
<div class="result" id="upResult"></div>
<button onclick="copyResult('upResult')">çµæœã‚³ãƒ”ãƒ¼</button>
</div>

<div id="down" class="section">
<h2>ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ï¼ˆè¿‘ï¼‰</h2>
<button onclick="calcDown()">è¨ˆç®—</button>
<div class="timer" id="downTimer">-</div>
<button onclick="startDown()">é–‹å§‹</button>
<button onclick="stopAll()">åœæ­¢</button>
<div class="result" id="downResult"></div>
<button onclick="copyResult('downResult')">çµæœã‚³ãƒ”ãƒ¼</button>
</div>

<div id="utc" class="section">
<h2>UTCå‡ºç™ºè¨ˆç®—</h2>

åˆ°ç€UTC:
<input type="number" id="h" min="0" max="23" placeholder="æ™‚">
<input type="number" id="m" min="0" max="59" placeholder="åˆ†">
<input type="number" id="s" min="0" max="59" placeholder="ç§’">

<br><br>
å¾®èª¿æ•´:
<select id="adj">
<option value="-5">-5</option>
<option value="-4">-4</option>
<option value="-3">-3</option>
<option value="-2">-2</option>
<option value="-1">-1</option>
<option value="0" selected>0</option>
<option value="1">+1</option>
<option value="2">+2</option>
<option value="3">+3</option>
<option value="4">+4</option>
<option value="5">+5</option>
</select>

<br><br>
<button onclick="calcUTC()">è¨ˆç®—</button>
<div class="result" id="utcResult"></div>
<button onclick="copyResult('utcResult')">çµæœã‚³ãƒ”ãƒ¼</button>
</div>

<script>
let members=[];
let upTimes=[],downTimes=[];
let upInterval,downInterval;

function add(){
 const n = document.getElementById("name").value || ("å‚åŠ è€…"+(members.length+1));
 const t = parseInt(document.getElementById("time").value);

 if(!isNaN(t)){
   members.push({name:n,time:t});
   members.sort((a,b)=>a.time-b.time);

   document.getElementById("members").innerText =
     members.map(m=>m.name+"("+m.time+"s)").join(" / ");
document.getElementById("name").value="";
document.getElementById("time").value="";
 }
}

function membersDisplay(){
 members.innerText=members.map(m=>m.name+"("+m.time+"s)").join(" / ");
}

function showTab(id){
 document.querySelectorAll('.section').forEach(s=>s.style.display="none");
 document.getElementById(id).style.display="block";
 document.querySelectorAll('.tab button').forEach(b=>b.classList.remove('active'));
 event.target.classList.add('active');
}

function calcUp(){
 const max=Math.max(...members.map(m=>m.time));
 upTimes=members.map(m=>({name:m.name,start:max-m.time+3}));
 let text="ã‚«ã‚¦ãƒ³ãƒˆã‚¢ãƒƒãƒ—\n";
 upTimes.forEach(p=>text+=`${p.name}: ${p.start}ç§’\n`);
 document.getElementById("upResult").innerText=text;
}

function startUp(){
 let t=-3;
 const end=Math.max(...upTimes.map(p=>p.start));
 clearInterval(upInterval);
 upInterval=setInterval(()=>{
   upTimer.innerText=t;
   if(t>=end) clearInterval(upInterval);
   t++;
 },1000);
}

function calcDown(){
 const min=Math.min(...members.map(m=>m.time));
 downTimes=members.map(m=>({name:m.name,start:m.time-min}));
 let max=Math.max(...downTimes.map(p=>p.start));
 document.getElementById("downTimer").innerText=max+3;
 let text="ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³\n";
 downTimes.forEach(p=>text+=`${p.name}: ${p.start}ç§’\n`);
 document.getElementById("downResult").innerText=text;
}

function startDown(){
 let t=parseInt(downTimer.innerText);
 clearInterval(downInterval);
 downInterval=setInterval(()=>{
   downTimer.innerText=t;
   if(t<=0) clearInterval(downInterval);
   t--;
 },1000);
}

function calcUTC(){
 if(members.length===0)return;
 const h=parseInt(h.value)||0;
 const m=parseInt(m.value)||0;
 const s=parseInt(s.value)||0;
 const adj=parseInt(adj.value)||0;

 let goal=h*3600+m*60+s+adj;
 if(goal<0)goal=0;
 if(goal>=86400)goal%=86400;

 let text="å‡ºç™ºUTC\n";

 members.forEach(mem=>{
   let depart=goal-mem.time;
   if(depart<0) depart+=86400;
   const hh=String(Math.floor(depart/3600)).padStart(2,'0');
   const mm=String(Math.floor((depart%3600)/60)).padStart(2,'0');
   const ss=String(depart%60).padStart(2,'0');
   text+=`${mem.name}: ${hh}:${mm}:${ss}\n`;
 });

 document.getElementById("utcResult").innerText=text;
}

function stopAll(){
 clearInterval(upInterval);
 clearInterval(downInterval);
 upTimer.innerText="-";
 downTimer.innerText="-";
}

function copyResult(id){
 navigator.clipboard.writeText(document.getElementById(id).innerText);
 alert("ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ");
}
</script>
</body>
</html>

