<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>é›†çµå¸ä»¤å¡”</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
  font-family:sans-serif;
  text-align:center;
  background:#111;
  color:#fff;
}
input,button,select{
  padding:8px;
  margin:4px;
  font-size:16px;
}
.section{
  border:1px solid #444;
  padding:15px;
  margin:15px;
  border-radius:10px;
}
.timer{
  font-size:48px;
  margin:15px;
}
.result{
  margin-top:10px;
  font-size:18px;
  color:#7CFC00;
}
</style>
</head>
<body>

<h1>ğŸ›° é›†çµå¸ä»¤å¡”</h1>

<div class="section">
<h2>å‚åŠ è€…æ™‚é–“å…¥åŠ›ï¼ˆç§’ï¼‰</h2>
<input type="number" id="timeInput" placeholder="ç§»å‹•æ™‚é–“(ç§’)">
<button onclick="addTime()">è¿½åŠ </button>
<p id="list"></p>

<button onclick="calcUp()">ã‚«ã‚¦ãƒ³ãƒˆã‚¢ãƒƒãƒ—è¨ˆç®—</button>
<button onclick="calcDown()">ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³è¨ˆç®—</button>

<div class="result" id="calcResult"></div>
</div>

<div class="section">
<h2>ã‚«ã‚¦ãƒ³ãƒˆã‚¢ãƒƒãƒ—</h2>
<div class="timer" id="upTimer">-</div>
<button onclick="startUp()">ã‚«ã‚¦ãƒ³ãƒˆé–‹å§‹</button>
<button onclick="stopUp()">åœæ­¢</button>
</div>

<div class="section">
<h2>ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³</h2>
<div class="timer" id="downTimer">-</div>
<button onclick="startDown()">é–‹å§‹</button>
<button onclick="stopDown()">åœæ­¢</button>
</div>

<div class="section">
<h2>UTCå‡ºç™ºè¨ˆç®—</h2>

<input type="number" id="hour" placeholder="æ™‚" min="0" max="23">
<input type="number" id="minute" placeholder="åˆ†" min="0" max="59">
<input type="number" id="second" placeholder="ç§’" min="0" max="59">

<br><br>

å¾®èª¿æ•´:
<select id="adjust">
  <option value="-5">-5ç§’</option>
  <option value="-4">-4ç§’</option>
  <option value="-3">-3ç§’</option>
  <option value="-2">-2ç§’</option>
  <option value="-1">-1ç§’</option>
  <option value="0" selected>Â±0ç§’</option>
  <option value="1">+1ç§’</option>
  <option value="2">+2ç§’</option>
  <option value="3">+3ç§’</option>
  <option value="4">+4ç§’</option>
  <option value="5">+5ç§’</option>
</select>

<br><br>

<button onclick="calcUTC()">å‡ºç™ºUTCè¨ˆç®—</button>
<div class="result" id="utcResult"></div>
</div>

<script>
let times=[];
let upInterval=null;
let downInterval=null;
let upStartTimes=[];
let maxUp=0;

function addTime(){
  const val=parseInt(timeInput.value);
  if(!isNaN(val)){
    times.push(val);
    list.innerText="å‚åŠ è€…: "+times.join(", ");
  }
}

function calcUp(){
  if(times.length==0)return;
  const max=Math.max(...times);
  upStartTimes=times.map(t=>max-t+3);
  maxUp=Math.max(...upStartTimes);

  let txt=`ã‚«ã‚¦ãƒ³ãƒˆã‚¢ãƒƒãƒ— ${maxUp} ç§’\n`;
  upStartTimes.forEach((t,i)=>{
    txt+=`å‚åŠ è€…${i+1}: ${t}ç§’\n`;
  });
  calcResult.innerText=txt;
}

function startUp(){
  if(maxUp===0)return;
  let t=-3;
  clearInterval(upInterval);
  upInterval=setInterval(()=>{
    upTimer.innerText=t;
    if(t>=maxUp){
      clearInterval(upInterval);
    }
    t++;
  },1000);
}

function stopUp(){
  clearInterval(upInterval);
  upTimer.innerText="-";
}

function calcDown(){
  if(times.length==0)return;
  const max=Math.max(...times);
  downTimer.innerText=max;
}

function startDown(){
  let t=parseInt(downTimer.innerText);
  if(isNaN(t))return;
  clearInterval(downInterval);
  downInterval=setInterval(()=>{
    downTimer.innerText=t;
    if(t<=0) clearInterval(downInterval);
    t--;
  },1000);
}

function stopDown(){
  clearInterval(downInterval);
  downTimer.innerText="-";
}

function calcUTC(){
  const h=parseInt(hour.value)||0;
  const m=parseInt(minute.value)||0;
  const s=parseInt(second.value)||0;
  const adjust=parseInt(adjust.value)||0;

  let total = h*3600 + m*60 + s + adjust;

  if(total < 0) total = 0;
  if(total >= 86400) total %= 86400;

  const hh = String(Math.floor(total/3600)).padStart(2,'0');
  const mm = String(Math.floor((total%3600)/60)).padStart(2,'0');
  const ss = String(total%60).padStart(2,'0');

  utcResult.innerText = "å‡ºç™ºUTC: " + hh + ":" + mm + ":" + ss;
}
</script>

</body>
</html>
